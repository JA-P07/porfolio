<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible+Next:ital,wght@0,200..800;1,200..800&family=Averia+Sans+Libre:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&family=Encode+Sans+SC:wght@100..900&display=swap');
    </style>
    <title> Julius Palttala</title>
</head>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const navLinks = Array.from(document.querySelectorAll(".navLink"));
        const cards = Array.from(document.querySelectorAll(".card"));

        if (!cards.length || !navLinks.length) return;

        // Poistaa aktiiviset luokat
        function clearActiveStates() {
            navLinks.forEach(link => link.classList.remove("active"));
            cards.forEach(card => card.classList.remove("current"));
        }

        function setActive(index) {
            clearActiveStates();
            if (navLinks[index]) navLinks[index].classList.add("active");
            if (cards[index]) cards[index].classList.add("current");
        }

        // Etsii sen kortin, jonka keskikohta on lähimpänä viewportin keskikohtaa
        function findClosestCardIndexToViewportCenter() {
            const viewportCenter = window.innerHeight / 2;
            let bestIndex = -1;
            let bestDistance = Infinity;
            cards.forEach((card, i) => {
                const rect = card.getBoundingClientRect();
                const cardCenter = rect.top + rect.height / 2;
                const distance = Math.abs(cardCenter - viewportCenter);
                if (distance < bestDistance) {
                    bestDistance = distance;
                    bestIndex = i;
                }
            });
            return bestIndex;
        }

        // Throttle visual updates with requestAnimationFrame
        let ticking = false;
        function onScrollOrResize() {
            if (!ticking) {
                window.requestAnimationFrame(() => {
                    const idx = findClosestCardIndexToViewportCenter();
                    if (idx !== -1) setActive(idx);
                    ticking = false;
                });
                ticking = true;
            }
        }

        // Käynnistetään ensimmäinen asetus (jos käyttäjä on jo korttialueella)
        onScrollOrResize();

        // Kuunnellaan scroll & resize
        window.addEventListener("scroll", onScrollOrResize, { passive: true });
        window.addEventListener("resize", onScrollOrResize);

        // Klikit nav-linkeihin: smooth scroll ja aktivoi heti
        navLinks.forEach((link, i) => {
            link.addEventListener("click", (e) => {
                e.preventDefault();
                if (!cards[i]) return;
                // scroll so card center aligns to viewport center
                const rect = cards[i].getBoundingClientRect();
                const currentScroll = window.scrollY || window.pageYOffset;
                const cardTop = currentScroll + rect.top;
                const scrollTo = Math.round(cardTop - (window.innerHeight - rect.height) / 2);
                window.scrollTo({ top: scrollTo, behavior: "smooth" });
                setActive(i);
            });
        });
    });

    document.addEventListener("DOMContentLoaded", () => {
        const typewriter = document.getElementById("typewriter");

        const phrases = [
            "A programmer",
            "A dual degree student",
            "An indie developer",
            "A writer with a distinctive voice"
        ];

        let phraseIndex = 0;
        let letterIndex = 1;          // start after the first "A"
        let typingSpeed = 100;        // ms per letter
        let deletingSpeed = 50;       // ms per letter when deleting
        let pauseAfterTyping = 1500;  // ms pause after full phrase
        let pauseAfterDeleting = 500; // ms pause after deleting

        function typeForward() {
            const currentPhrase = phrases[phraseIndex];
            typewriter.textContent = currentPhrase.slice(0, letterIndex + 1);
            letterIndex++;

            if (letterIndex < currentPhrase.length) {
                setTimeout(typeForward, typingSpeed);
            } else {
                setTimeout(typeBackward, pauseAfterTyping);
            }
        }

        function typeBackward() {
            const currentPhrase = phrases[phraseIndex];
            // never delete the first character (index 0)
            if (letterIndex > 1) {
                typewriter.textContent = currentPhrase.slice(0, letterIndex - 1);
                letterIndex--;
                setTimeout(typeBackward, deletingSpeed);
            } else {
                // Move to next phrase
                phraseIndex = (phraseIndex + 1) % phrases.length;
                letterIndex = 1; // reset after "A"
                setTimeout(typeForward, pauseAfterDeleting);
            }
        }

        // Initialize with the first "A" visible
        typewriter.textContent = "A";

        // Start typing
        setTimeout(typeForward, typingSpeed);
    });
</script>


<body>

    <nav>
        <h4><b>Julius<br>Palttala</b></h4>
        <div class="links">
            <a class="TopLink" href="https://github.com/JA-P07">
                <h3>Github</h3>
            </a>
            <a class="TopLink" href="https://caesarstriumph.itch.io/">
                <h3>Itch.io</h3>
            </a>
        </div>

    </nav>
    <div class="heroText">
        <h4>The name's Julius Palttala and I am...</h4>
        <h1 id="typewriter"></h1>
    </div>
    <br>
    <div class="content">
        <a class="navLink active" href="">About Me</a>
        <a class="navLink" href="">My Resume</a>
        <a class="navLink" href="">Projects</a>
    </div>

    <div class="wrapper">
        <section class="card current">
            <div class="about">
                <h2>About Me</h2>
                <img class="facePic"
                    src="https://png.pngtree.com/png-vector/20250512/ourmid/pngtree-default-avatar-profile-icon-gray-placeholder-vector-png-image_16213764.png"
                    alt="Me">
                <p class="ProfileText">I consider myself a man of many talents, having worked in varying environments
                    and industries, such as fast food and security system installation alongside IT.
                    In my free time, I like to pactice HEMA (historical European martial arts) and spend time with
                    friends and family. Lately I've been very interested in literature and creative writing,
                    and therfore consider both of them as fields of later studies.</p>
            </div>
        </section>
        <section class="card">
            <div>
                <h2>My Resume</h2>
            </div>
        </section>
        <section class="card">
            <h2>Projects</h2>
            <ul class="filters">
                <li>All</li>
                <li>Fullstack/Web</li>
                <li>Game</li>
                <li>C#</li>
                <li>React</li>
                <li>PHP</li>
            </ul>
            <div class="projects">
                <div class="project-item">
                    <h3>Example</h3>
                    <p>A short description.</p>
                    <a href="">View this project</a>
                    <ul class="taglist">
                        <li>HTML</li>
                        <li>CSS</li>
                        <li>JS</li>
                    </ul>
                </div>
                <div class="project-item">
                    <h3>Example</h3>
                    <p>A short description.</p>
                    <a href="">View this project</a>
                    <ul class="taglist">
                        <li>HTML</li>
                        <li>CSS</li>
                        <li>JS</li>
                    </ul>
                </div>
                <div class="project-item">
                    <h3>Example</h3>
                    <p>A short description.</p>
                    <a href="">View this project</a>
                    <ul class="taglist">
                        <li>HTML</li>
                        <li>CSS</li>
                        <li>JS</li>
                    </ul>
                </div>
            </div>
        </section>
    </div>
    </section>
    </div>

    <footer>
        <h5>© Julius Palttala 2025</h5>
    </footer>
</body>

</html>